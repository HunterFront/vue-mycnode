webpackJsonp([1],{NHnr:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("7+uW"),n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var i=e("VU/8")({name:"App"},n,!1,function(t){e("s5tC")},null,null).exports,o=e("/ocq"),r={components:{nvMenu:e("uAGr").default},props:{headTxt:String},data:function(){return{isOpen:!1}},methods:{openMenu:function(){this.isOpen=!0},closeMenu:function(){this.isOpen=!1}}},c={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("header",{class:{open:t.isOpen},attrs:{id:"hd"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"page-cover",on:{click:t.closeMenu}}),t._v(" "),e("div",{staticClass:"nv-bar"},[e("div",{staticClass:"nv-bar__menu-btn",on:{click:t.openMenu}}),t._v(" "),e("span",{staticClass:"nv-bar__txt"},[t._v(t._s(t.headTxt))]),t._v(" "),e("div",{staticClass:"nv-bar__add"},[e("router-link",{attrs:{to:"/add"}},[e("i",{staticClass:"iconfont add-icon"},[t._v("")])])],1)]),t._v(" "),e("nvMenu")],1)])},staticRenderFns:[]},l=e("VU/8")(r,c,!1,null,null,null).exports,u={data:function(){return{show:!1}},mounted:function(){var t=this;window.onscroll=function(){var s=document.body.scrollTop||document.documentElement.scrollTop;t.show=s>270}},methods:{toTop:function(){document.body.scrollTop?document.body.scrollTop=0:document.documentElement.scrollTop=0}}},v={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"iconfont icon-top",on:{click:this.toTop}},[this._v("\n  \n")])},staticRenderFns:[]};var d={components:{nvHead:l,backtotop:e("VU/8")(u,v,!1,function(t){e("ihVQ")},null,null).exports},beforeRouteUpdate:function(t,s,e){this.$refs.head.isOpen=!1,this.fetchData(t.query.tab),e()},props:["query"],data:function(){return{loading:!1,post:null,error:null}},created:function(){this.fetchData("all")},methods:{fetchData:function(t){var s=this;this.error=this.post=null,this.loading=!0,this.$api.get("topics",{tab:t},function(t){s.loading=!1,s.post=t.data,console.log(s.post)},function(t){s.loading=!1,s.error=t})}}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("nv-head",{ref:"head",attrs:{"head-txt":t.$utils.getTabInfo(t.query)}}),t._v(" "),e("div",{attrs:{id:"topics"}},[t.loading?e("div",{staticClass:"loading"}):t._e(),t._v(" "),t.error?e("div",{staticClass:"error"},[t._v("\n      "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),t.post?e("ul",{staticClass:"post"},t._l(t.post,function(s){return e("router-link",{key:s.id,attrs:{to:{name:"Content",params:{id:s.id}}}},[e("li",{staticClass:"post__item"},[e("div",{staticClass:"post__head"},[e("h3",{staticClass:"post__title"},[e("span",{staticClass:"post__tag",class:[s.tab,{top:s.top,good:s.good}]},[t._v("\n                "+t._s(t.$utils.getTagTxt(s.tab,s.top,s.good))+"\n              ")]),t._v(t._s(s.title)+"\n            ")])]),t._v(" "),e("div",{staticClass:"post__info"},[e("div",{staticClass:"post__author"},[e("img",{staticClass:"avatar",attrs:{src:s.author.avatar_url}}),t._v(" "),e("div",{staticClass:"logname-pubtime"},[e("p",{staticClass:"logname"},[t._v(t._s(s.author.loginname))]),t._v(" "),e("p",{staticClass:"pubtime"},[t._v(t._s(t.$utils.goodTime(s.create_at)))])])]),t._v(" "),e("div",{staticClass:"post__other"},[e("p",[e("span",{staticClass:"reply-count"},[t._v(t._s(s.reply_count))]),t._v("\n                /\n                "),e("span",{staticClass:"visit-count"},[t._v(t._s(s.visit_count))])]),t._v(" "),e("p",{staticClass:"last-replay-time"},[t._v(t._s(t.$utils.goodTime(s.last_reply_at)))])])])])])})):t._e()]),t._v(" "),e("backtotop")],1)},staticRenderFns:[]},p=e("VU/8")(d,_,!1,null,null,null).exports,h={components:{nvHead:l}},f={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"about"}},[s("nv-head",{ref:"head",attrs:{"head-txt":"关于"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"about-info"},[e("div",{staticClass:"desc"},[e("h3",[t._v("关于项目")]),t._v(" "),e("p",[t._v("该项目是以cnode官方提供的api为基础，用vue2写的webapp")])]),t._v(" "),e("div",{staticClass:"address"},[e("h3",[t._v("源码地址")]),t._v(" "),e("a",{attrs:{href:"https://github.com/HunterFront/vue-mycnode"}},[t._v("https://github.com/HunterFront/vue-mycnode")])]),t._v(" "),e("div",{staticClass:"version"},[e("h3",[t._v("Vue版本")]),t._v(" "),e("p",[t._v("vue 2.9.3")])])])}]},m=e("VU/8")(h,f,!1,null,null,null).exports,C={components:{nvHead:l},props:["id"],data:function(){return{topic:null,loading:!1,error:null}},created:function(){this.fetchData(this.id)},methods:{fetchData:function(t){var s=this;this.error=this.topic=null,this.loading=!0,this.$api.get("topic/"+t,null,function(t){s.loading=!1,s.topic=t.data,console.log(s.topic)},function(t){s.loading=!1,s.error=t})}}},b={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"content"}},[t.loading?e("div",{staticClass:"loading"}):t._e(),t._v(" "),t.error?e("div",{staticClass:"error"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e(),t._v(" "),e("nv-head",{attrs:{"head-txt":"文章"}}),t._v(" "),t.topic?e("div",{staticClass:"article"},[e("h2",{staticClass:"article__title"},[t._v("\n      "+t._s(t.topic.title)+"\n    ")]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"article__content"}),t._v(" "),e("div",{staticClass:"article__reply"})]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"article__info"},[s("div",{staticClass:"lf-info"}),this._v(" "),s("div",{staticClass:"rt-info"})])}]},g=e("VU/8")(C,b,!1,null,null,null).exports;a.a.use(o.a);var T=new o.a({routes:[{path:"/topics",name:"Topics",component:p,props:function(t){return{query:t.query.tab}}},{path:"/about",name:"About",component:m},{path:"/topic/:id",name:"Content",component:g,props:!0}]}),w={goodTime:function(t){var s=(new Date).getTime()-new Date(t).getTime(),e=s/31104e6,a=s/2592e6,n=s/6048e5,i=s/864e5,o=s/36e5,r=s/6e4;return e>=1?~~e+" 年前":a>=1?~~a+" 个月前":n>=1?~~n+" 周前":i>=1?~~i+" 天前":o>=1?~~o+" 个小时前":r>=1?~~r+" 分钟前":"刚刚"},getTagTxt:function(t,s,e){var a="";if(s)a="置顶";else if(e)a="精华";else switch(t){case"share":a="分享";break;case"ask":a="问答";break;case"job":a="招聘"}return a},getTabInfo:function(t){var s="";switch(t){case"all":s="全部";break;case"good":s="精华";break;case"ask":s="问答";break;case"job":s="招聘";break;case"share":s="分享"}return s}},k=e("mvHQ"),y=e.n(k),E="https://cnodejs.org/api/v1",x=e("mtWM");function $(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function q(t,s,e,a,n){e&&(e=function t(s){for(var e in s)null===s[e]&&delete s[e],"string"===$(s[e])?s[e]=s[e].trim():"object"===$(s[e])?s[e]=t(s[e]):"array"===$(s[e])&&(s[e]=t(s[e]));return s}(e)),x({method:t,url:s,data:"POST"===t||"PUT"===t?e:null,params:"GET"===t||"DELETE"===t?e:null,baseURL:E,withCredentials:!1}).then(function(t){!0===t.data.success?a&&a(t.data):n?n(t.data):window.alert("error: "+y()(t.data))}).catch(function(t){var s=t.response;t&&window.alert("api error, HTTP CODE: "+s.status)})}var O={get:function(t,s,e,a){return q("GET",t,s,e,a)},post:function(t,s,e,a){return q("POST",t,s,e,a)},put:function(t,s,e,a){return q("PUT",t,s,e,a)},delete:function(t,s,e,a){return q("DELETE",t,s,e,a)}};a.a.prototype.$utils=w,a.a.prototype.$api=O,a.a.config.productionTip=!1,new a.a({el:"#app",router:T,components:{App:i},template:"<App/>"})},ihVQ:function(t,s){},s5tC:function(t,s){},tJAE:function(t,s){},uAGr:function(t,s,e){"use strict";var a=e("tJAE"),n=e.n(a),i=e("vRjf"),o=e("VU/8")(n.a,i.a,!1,null,null,null);s.default=o.exports},vRjf:function(t,s,e){"use strict";var a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{attrs:{id:"side-bar"}},[e("div",{staticClass:"user"},[t._v("user")]),t._v(" "),e("div",{staticClass:"menu"},[e("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"all"}}}},[e("i",{staticClass:"iconfont icon-quanbu"}),t._v(" "),e("span",[t._v("全部")])]),t._v(" "),e("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"good"}}}},[e("i",{staticClass:"iconfont icon-hao"}),t._v(" "),e("span",[t._v("精华")])]),t._v(" "),e("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"share"}}}},[e("i",{staticClass:"iconfont icon-fenxiang"}),t._v(" "),e("span",[t._v("分享")])]),t._v(" "),e("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"ask"}}}},[e("i",{staticClass:"iconfont icon-wenda"}),t._v(" "),e("span",[t._v("问答")])]),t._v(" "),e("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"job"}}}},[e("i",{staticClass:"iconfont icon-zhaopin"}),t._v(" "),e("span",[t._v("招聘")])])],1),t._v(" "),e("div",{staticClass:"msg-about-box"},[e("router-link",{staticClass:"message",attrs:{to:""}},[e("i",{staticClass:"iconfont icon-xiaoxi"}),t._v(" "),e("span",[t._v("消息")])]),t._v(" "),e("router-link",{staticClass:"about",attrs:{to:{name:"About"}}},[e("i",{staticClass:"iconfont icon-about"}),t._v(" "),e("span",[t._v("关于")])])],1)])},staticRenderFns:[]};s.a=a}},["NHnr"]);
//# sourceMappingURL=app.3e480979fc9b25691bdf.js.map