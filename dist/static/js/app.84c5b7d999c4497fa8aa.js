webpackJsonp([1],{NHnr:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("7+uW"),n={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},staticRenderFns:[]};var i=a("VU/8")({name:"App"},n,!1,function(t){a("f1L8")},null,null).exports,o=a("/ocq"),r=a("Gu7T"),c=a.n(r),l={components:{nvMenu:a("uAGr").default},props:{headTxt:String},data:function(){return{isOpen:!1}},methods:{openMenu:function(){this.isOpen=!0},closeMenu:function(){this.isOpen=!1}}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("header",{class:{open:t.isOpen},attrs:{id:"hd"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"page-cover",on:{click:t.closeMenu}}),t._v(" "),a("div",{staticClass:"nv-bar"},[a("div",{staticClass:"nv-bar__menu-btn",on:{click:t.openMenu}}),t._v(" "),a("span",{staticClass:"nv-bar__txt"},[t._v(t._s(t.headTxt))]),t._v(" "),a("div",{staticClass:"nv-bar__add"},[a("router-link",{attrs:{to:"/add"}},[a("i",{staticClass:"iconfont add-icon"},[t._v("")])])],1)]),t._v(" "),a("nvMenu")],1)])},staticRenderFns:[]},v=a("VU/8")(l,u,!1,null,null,null).exports,p={data:function(){return{show:!1}},mounted:function(){var t=this;window.onscroll=function(){var s=document.body.scrollTop||document.documentElement.scrollTop;t.show=s>270}},methods:{toTop:function(){document.body.scrollTop?document.body.scrollTop=0:document.documentElement.scrollTop=0}}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{directives:[{name:"show",rawName:"v-show",value:this.show,expression:"show"}],staticClass:"iconfont icon-top",on:{click:this.toTop}},[this._v("\n  \n")])},staticRenderFns:[]};var _={components:{nvHead:v,backtotop:a("VU/8")(p,d,!1,function(t){a("Y76w")},null,null).exports},beforeRouteUpdate:function(t,s,a){this.$refs.head.isOpen=!1,this.serchKey.tab=t.query.tab,this.post=[],this.fetchData({tab:t.query.tab,page:1,limit:20,mdrender:!0}),a()},data:function(){return{loading:!1,post:[],error:null,scroll:!1,serchKey:{tab:"all",page:1,limit:20,mdrender:!0}}},created:function(){this.fetchData(this.serchKey)},mounted:function(){window.onscroll=this.$utils.throttle(this.getScrollData,300,1e3)},methods:{fetchData:function(t){var s=this,a=t.tab,e=t.page,n=t.limit,i=t.mdrender;this.error=null,this.loading=!0,this.$api.get("topics",{tab:a,page:e,limit:n,mdrender:i},function(t){var a;s.loading=!1,s.scroll=!0,(a=s.post).push.apply(a,c()(t.data)),console.log(s.post)},function(t){s.loading=!1,s.error=t})},getScrollData:function(){this.scroll&&(parseInt(document.documentElement.scrollHeight)-parseInt(document.documentElement.clientHeight||window.innerHeith||document.body.clientHeight)-parseInt(document.documentElement.scrollTop)<=200&&(this.serchKey.page++,this.fetchData(this.serchKey)))}}},h={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("nv-head",{ref:"head",attrs:{"head-txt":t.$utils.getTabInfo(t.serchKey.tab)}}),t._v(" "),a("div",{attrs:{id:"topics"}},[t.loading?a("div",{staticClass:"loading"}):t._e(),t._v(" "),t.error?a("div",{staticClass:"error"},[t._v("\n      "+t._s(t.error)+"\n    ")]):t._e(),t._v(" "),t.post?a("ul",{staticClass:"post"},t._l(t.post,function(s){return a("router-link",{key:s.id,attrs:{to:{name:"Content",params:{id:s.id}}}},[a("li",{staticClass:"post__item"},[a("div",{staticClass:"post__head"},[a("h3",{staticClass:"post__title"},[a("span",{staticClass:"post__tag",class:[s.tab,{top:s.top,good:s.good}]},[t._v("\n                "+t._s(t.$utils.getTagTxt(s.tab,s.top,s.good))+"\n              ")]),t._v(t._s(s.title)+"\n            ")])]),t._v(" "),a("div",{staticClass:"post__info"},[a("div",{staticClass:"author"},[a("img",{staticClass:"avatar",attrs:{src:s.author.avatar_url}}),t._v(" "),a("div",{staticClass:"logname-pubtime"},[a("p",{staticClass:"logname"},[t._v(t._s(s.author.loginname))]),t._v(" "),a("p",{staticClass:"pubtime"},[t._v(t._s(t.$utils.goodTime(s.create_at)))])])]),t._v(" "),a("div",{staticClass:"post__other"},[a("p",[a("span",{staticClass:"reply-count"},[t._v(t._s(s.reply_count))]),t._v("\n                /\n                "),a("span",{staticClass:"visit-count"},[t._v(t._s(s.visit_count))])]),t._v(" "),a("p",{staticClass:"last-replay-time"},[t._v(t._s(t.$utils.goodTime(s.last_reply_at)))])])])])])})):t._e()]),t._v(" "),a("backtotop")],1)},staticRenderFns:[]},m=a("VU/8")(_,h,!1,null,null,null).exports,f={components:{nvHead:v}},C={render:function(){var t=this.$createElement,s=this._self._c||t;return s("div",{attrs:{id:"about"}},[s("nv-head",{ref:"head",attrs:{"head-txt":"关于"}}),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"about-info"},[a("div",{staticClass:"desc"},[a("h3",[t._v("关于项目")]),t._v(" "),a("p",[t._v("该项目是以cnode官方提供的api为基础，用vue2写的webapp")])]),t._v(" "),a("div",{staticClass:"address"},[a("h3",[t._v("源码地址")]),t._v(" "),a("a",{attrs:{href:"https://github.com/HunterFront/vue-mycnode"}},[t._v("https://github.com/HunterFront/vue-mycnode")])]),t._v(" "),a("div",{staticClass:"version"},[a("h3",[t._v("Vue版本")]),t._v(" "),a("p",[t._v("vue 2.9.3")])])])}]},g=a("VU/8")(f,C,!1,null,null,null).exports,b={components:{nvHead:v},props:["id"],data:function(){return{topic:null,loading:!1,error:null}},created:function(){this.fetchData(this.id)},methods:{fetchData:function(t){var s=this;this.error=this.topic=null,this.loading=!0,this.$api.get("topic/"+t,null,function(t){s.loading=!1,s.topic=t.data,console.log(s.topic)},function(t){s.loading=!1,s.error=t})}}},T={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"content"}},[t.loading?a("div",{staticClass:"loading"}):t._e(),t._v(" "),t.error?a("div",{staticClass:"error"},[t._v("\n    "+t._s(t.error)+"\n  ")]):t._e(),t._v(" "),a("nv-head",{attrs:{"head-txt":"文章"}}),t._v(" "),t.topic?a("div",{staticClass:"article"},[a("h2",{staticClass:"article__title"},[t._v("\n      "+t._s(t.topic.title)+"\n    ")]),t._v(" "),a("div",{staticClass:"article__info"},[a("div",{staticClass:"author"},[a("img",{staticClass:"avatar",attrs:{src:t.topic.author.avatar_url}}),t._v(" "),a("div",{staticClass:"logname-pubtime"},[a("p",{staticClass:"logname"},[t._v(t._s(t.topic.author.loginname))]),t._v(" "),a("p",{staticClass:"pubtime"},[t._v("发布于:"+t._s(t.$utils.goodTime(t.topic.create_at)))])])]),t._v(" "),a("div",{staticClass:"other"},[a("p",{staticClass:"tag",class:[t.topic.tab,{top:t.topic.top,good:t.topic.good}]},[t._v(t._s(t.$utils.getTagTxt(t.topic.tab,t.topic.top,t.topic.good)))]),t._v(" "),a("p",{staticClass:"visit-count"},[t._v(t._s(t.topic.visit_count)+"次浏览")])])]),t._v(" "),a("div",{staticClass:"article__content markdown-body",domProps:{innerHTML:t._s(t.topic.content)}}),t._v(" "),a("div",{staticClass:"reply-box"},[a("div",{staticClass:"reply-box__count"},[a("span",{staticClass:"count"},[t._v(t._s(t.topic.reply_count))]),t._v(" "),a("span",{staticClass:"txt"},[t._v("回复")])]),t._v(" "),a("ul",{staticClass:"reply-list"},t._l(t.topic.replies,function(s){return a("li",{key:s.id,staticClass:"reply-item"},[a("div",{staticClass:"reply-info"},[a("div",{staticClass:"author"},[a("img",{staticClass:"avatar avatar--m",attrs:{src:s.author.avatar_url}}),t._v(" "),a("div",{staticClass:"logname-pubtime"},[a("p",{staticClass:"logname"},[t._v(t._s(s.author.loginname))]),t._v(" "),a("p",{staticClass:"pubtime"},[t._v("发布于:"+t._s(t.$utils.goodTime(s.create_at)))])])]),t._v(" "),a("div",{staticClass:"like-replyto"},[a("span",{staticClass:"like"},[a("i",{staticClass:"icon iconfont"},[t._v("")]),t._v(" "),a("span",{staticClass:"like-count"},[t._v(t._s(s.ups.length))])]),t._v(" "),a("span",{staticClass:"replyto icon iconfont"},[t._v("")])])]),t._v(" "),a("div",{staticClass:"reply-content markdown-body",domProps:{innerHTML:t._s(s.content)}})])}))])]):t._e()],1)},staticRenderFns:[]},y=a("VU/8")(b,T,!1,null,null,null).exports;e.a.use(o.a);var w=new o.a({routes:[{path:"/topics",name:"Topics",component:m},{path:"/about",name:"About",component:g},{path:"/topic/:id",name:"Content",component:y,props:!0}]}),k={goodTime:function(t){var s=(new Date).getTime()-new Date(t).getTime(),a=s/31104e6,e=s/2592e6,n=s/6048e5,i=s/864e5,o=s/36e5,r=s/6e4;return a>=1?~~a+" 年前":e>=1?~~e+" 个月前":n>=1?~~n+" 周前":i>=1?~~i+" 天前":o>=1?~~o+" 个小时前":r>=1?~~r+" 分钟前":"刚刚"},getTagTxt:function(t,s,a){var e="";if(s)e="置顶";else if(a)e="精华";else switch(t){case"share":e="分享";break;case"ask":e="问答";break;case"job":e="招聘"}return e},getTabInfo:function(t){var s="";switch(t){case"all":s="全部";break;case"good":s="精华";break;case"ask":s="问答";break;case"job":s="招聘";break;case"share":s="分享"}return s},throttle:function(t,s,a){var e=void 0,n=new Date;return function(){var i=arguments,o=new Date;clearTimeout(e),o-n>=a?(t.apply(this,i),n=o):e=setTimeout(t,s)}}},x=a("mvHQ"),E=a.n(x),$="https://cnodejs.org/api/v1",D=a("mtWM");function H(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function O(t,s,a,e,n){a&&(a=function t(s){for(var a in s)null===s[a]&&delete s[a],"string"===H(s[a])?s[a]=s[a].trim():"object"===H(s[a])?s[a]=t(s[a]):"array"===H(s[a])&&(s[a]=t(s[a]));return s}(a)),D({method:t,url:s,data:"POST"===t||"PUT"===t?a:null,params:"GET"===t||"DELETE"===t?a:null,baseURL:$,withCredentials:!1}).then(function(t){!0===t.data.success?e&&e(t.data):n?n(t.data):window.alert("error: "+E()(t.data))}).catch(function(t){var s=t.response;t&&window.alert("api error, HTTP CODE: "+s.status)})}var R={get:function(t,s,a,e){return O("GET",t,s,a,e)},post:function(t,s,a,e){return O("POST",t,s,a,e)},put:function(t,s,a,e){return O("PUT",t,s,a,e)},delete:function(t,s,a,e){return O("DELETE",t,s,a,e)}};e.a.prototype.$utils=k,e.a.prototype.$api=R,e.a.config.productionTip=!1,new e.a({el:"#app",router:w,components:{App:i},template:"<App/>"})},Y76w:function(t,s){},f1L8:function(t,s){},tJAE:function(t,s){},uAGr:function(t,s,a){"use strict";var e=a("tJAE"),n=a.n(e),i=a("vRjf"),o=a("VU/8")(n.a,i.a,!1,null,null,null);s.default=o.exports},vRjf:function(t,s,a){"use strict";var e={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{attrs:{id:"side-bar"}},[a("div",{staticClass:"user"},[t._v("user")]),t._v(" "),a("div",{staticClass:"menu"},[a("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"all"}}}},[a("i",{staticClass:"iconfont icon-quanbu"}),t._v(" "),a("span",[t._v("全部")])]),t._v(" "),a("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"good"}}}},[a("i",{staticClass:"iconfont icon-hao"}),t._v(" "),a("span",[t._v("精华")])]),t._v(" "),a("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"share"}}}},[a("i",{staticClass:"iconfont icon-fenxiang"}),t._v(" "),a("span",[t._v("分享")])]),t._v(" "),a("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"ask"}}}},[a("i",{staticClass:"iconfont icon-wenda"}),t._v(" "),a("span",[t._v("问答")])]),t._v(" "),a("router-link",{staticClass:"menu__item",attrs:{to:{name:"Topics",query:{tab:"job"}}}},[a("i",{staticClass:"iconfont icon-zhaopin"}),t._v(" "),a("span",[t._v("招聘")])])],1),t._v(" "),a("div",{staticClass:"msg-about-box"},[a("router-link",{staticClass:"message",attrs:{to:""}},[a("i",{staticClass:"iconfont icon-xiaoxi"}),t._v(" "),a("span",[t._v("消息")])]),t._v(" "),a("router-link",{staticClass:"about",attrs:{to:{name:"About"}}},[a("i",{staticClass:"iconfont icon-about"}),t._v(" "),a("span",[t._v("关于")])])],1)])},staticRenderFns:[]};s.a=e}},["NHnr"]);
//# sourceMappingURL=app.84c5b7d999c4497fa8aa.js.map